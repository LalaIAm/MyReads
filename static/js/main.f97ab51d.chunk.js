(this["webpackJsonpmy-reads"]=this["webpackJsonpmy-reads"]||[]).push([[0],{259:function(e,t,a){e.exports=a(428)},418:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(60),l=a.n(o),c=a(28),s=a(29),u=a(31),i=a(30),h=a(157),m="https://reactnd-books-api.udacity.com",p=localStorage.token;p||(p=localStorage.token=Math.random().toString(36).substr(-8));var d={Accept:"application/json",Authorization:p},f=function(){return fetch("".concat(m,"/books"),{headers:d}).then((function(e){return e.json()})).then((function(e){return e.books}))},b=a(53),v=a(441),E=a(449),g=a(446),y=a(248),k=a(76),S=a(444),j=a(447),O=function(e){var t=e.book;return r.a.createElement(S.a,{trigger:r.a.createElement(j.a,{primary:!0},"Book Details")},r.a.createElement(S.a.Header,null,t.title),r.a.createElement(S.a.Content,null,r.a.createElement(y.a,{wrapped:!0,floated:"right",size:"medium",src:t.imageLinks.thumbnail}),r.a.createElement(S.a.Description,null,r.a.createElement(E.a,{as:"h3"},t.title),r.a.createElement(E.a,{as:"h4"},t.subtitle),r.a.createElement("p",null,t.publishedDate," ",t.pageCount," pages"),r.a.createElement("p",null,t.description))))},C=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.props.changeShelves(n.state.value)},n.state={value:""},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("select",{className:"dropdown",value:this.state.value,onChange:this.handleChange},r.a.createElement("option",{value:""},"Shelf"),r.a.createElement("option",{value:"read"},"Past Read"),r.a.createElement("option",{value:"currentlyReading"},"Current Read"),r.a.createElement("option",{value:"wantToRead"},"Future Read")),r.a.createElement(j.a,{secondary:!0,className:"btn",type:"submit"},"Switch Shelves"))}}]),a}(n.Component),w=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onShelfChange=function(e,t){var a=t.value;n.setState({value:a}),n.switchShelves()},n.switchShelves=function(e){n.props.changeShelves(n.props.book,e)},n.state={},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.book,a=e.icon,n=t.authors;return Array.isArray(n)&&(n=n.toString()),r.a.createElement(g.a,null,r.a.createElement(g.a.Content,null,t&&t.imageLinks.smallThumbnail&&r.a.createElement(y.a,{src:t.imageLinks.smallThumbnail||"",wrapped:!0,floated:"right",size:"mini"}),r.a.createElement(g.a.Header,null,t.title),r.a.createElement(g.a.Meta,null,t.subtitle),r.a.createElement(g.a.Description,null,r.a.createElement("p",null,r.a.createElement("span",null," ",r.a.createElement(k.a,{circular:!0,name:a,color:"teal"})," ")," ","by ",n))),r.a.createElement(g.a.Content,{extra:!0},r.a.createElement("div",{className:"card-action"},r.a.createElement(O,{book:t}),r.a.createElement(C,{changeShelves:this.switchShelves}))))}}]),a}(n.Component),R=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.changeShelves,n=t.shelf;if(!this.props.books)return r.a.createElement("p",null,"Search books to find new reads");var o=Array.from(this.props.books);return r.a.createElement(v.a,null,r.a.createElement(E.a,{as:"h3",textAlign:"center"},n),r.a.createElement(v.a,null,r.a.createElement(g.a.Group,{itemsPerRow:1},o.map((function(t,n){return r.a.createElement(w,{icon:e.props.icon||"check",book:t,key:t.id,changeShelves:a})})))))}}]),a}(r.a.Component),N=a(450),q=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getPastReads=function(){return e.props.books.filter((function(e){return"read"===e.shelf}))},e.getCurrentReads=function(){return e.props.books.filter((function(e){return"currentlyReading"===e.shelf}))},e.getFutureReads=function(){return e.props.books.filter((function(e){return"wantToRead"===e.shelf}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement(E.a,{as:"h2",textAlign:"center"},"MyShelves"),r.a.createElement(N.a,{padded:!0,columns:3,divided:!0},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,null,r.a.createElement(R,{changeShelves:this.props.changeShelves,books:this.getFutureReads(),shelf:"Future Reads",booksInRow:3,icon:"calendar check outline"})),r.a.createElement(N.a.Column,null,r.a.createElement(R,{changeShelves:this.props.changeShelves,books:this.getCurrentReads(),shelf:"Current Reads",booksInRow:3,icon:"book"})),r.a.createElement(N.a.Column,null,r.a.createElement(R,{changeShelves:this.props.changeShelves,books:this.getPastReads(),shelf:"Past Reads",booksInRow:3,icon:"paper plane outline"})))))}}]),a}(n.Component),A=a(443),M=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleQueryChange=function(t){e.setState({query:t.target.value}),e.props.updateQuery(e.state.query)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement(A.a,null,r.a.createElement(A.a.Input,{type:"text",onChange:this.handleQueryChange,placeholder:"Search...",className:"search-books",value:this.state.query})))}}]),a}(n.Component),P=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement(E.a,{as:"h2",textAlign:"center"},"Search"),r.a.createElement(M,{query:this.props.query,updateQuery:this.props.updateQuery}),r.a.createElement(R,{books:this.props.books,booksInRow:6,changeShelves:this.props.changeShelves}))}}]),a}(n.Component),Q=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleShelfChange=function(e,t){!function(e,t){fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(h.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t),f().then((function(e){n.setState({books:e})}))},n.updateQuery=function(e){n.setState((function(){return{query:e}})),function(e){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(h.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(n.state.query).then((function(e){n.setState({foundBooks:e})}))},n.state={books:[],query:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;f().then((function(t){e.setState({books:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",exact:!0,render:function(){return r.a.createElement(q,{books:e.state.books,changeShelves:e.handleShelfChange})}}),r.a.createElement(b.a,{path:"/search",render:function(){return r.a.createElement(P,{books:e.state.foundBooks,changeShelves:e.handleShelfChange,updateQuery:e.updateQuery,query:e.state.query})}}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(417),a(418);var T=a(73),x=a(247),B=a(451),D=a(452),I=a(448),F=a(445),J=function(e){var t=e.children,a=Object(n.useRef)(),o=Object(n.useState)(!1),l=Object(x.a)(o,2),c=l[0],s=l[1];return r.a.createElement(B.a.Pushable,{as:D.a.Group,raised:!0},r.a.createElement(B.a,{as:I.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:function(){return s(!1)},target:a,visible:c,width:"wide"},r.a.createElement("div",{className:"sidebar-menu"},r.a.createElement("h2",null,"MyReads"),r.a.createElement("ul",{className:"sidebar-list"},r.a.createElement("li",{className:"sidebar-item"},r.a.createElement(T.b,{to:"/"},r.a.createElement("p",{className:"menu-link"},"My Shelves"))),r.a.createElement("li",{className:"sidebar-item"},r.a.createElement(T.b,{to:"/search"},r.a.createElement("p",{className:"menu-link"},"Search Books")))))),r.a.createElement(F.a,{innerRef:a},r.a.createElement(D.a,null,r.a.createElement("div",{className:"header"},r.a.createElement(j.a,{onClick:function(e){s(!0)}},"Menu"),r.a.createElement("h1",null,"MyReads")),t)))};a(442).a({dsn:"https://41be231c64f24c01a1a944812499526d@sentry.io/5184466"}),l.a.render(r.a.createElement(T.a,null,r.a.createElement(J,null,r.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[259,1,2]]]);
//# sourceMappingURL=main.f97ab51d.chunk.js.map